exec("import re;import base64");exec(base64.b64decode('IyMjIyMjIyMjIyMjI0ltcG9ydHMjIyMjIyMjIyMjIyMjDQppbXBvcnQgYmFzZTY0LG9zLHJlLHJlcXVlc3RzLHN0cmluZyxzeXMsdXJsbGliLGpzb24sdXJscGFyc2UsZGF0ZXRpbWUsemlwZmlsZQ0KaW1wb3J0IHhibWMseGJtY2FkZG9uLHhibWNndWkseGJtY3BsdWdpbg0KZnJvbSByZXNvdXJjZXMubW9kdWxlcyBpbXBvcnQgY2xpZW50LGNvbnRyb2wNCiMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KDQojIyMjIyMjIyMjIyMjRGVmaW5lZCBTdHJpbmdzIyMjIyMjIyMjIyMjIw0KYWRkb25faWQgICAgID0gJ3BsdWdpbi52aWRlby5HYW1tYVN0cmVhbXMnDQpzZWxmQWRkb24gICAgPSB4Ym1jYWRkb24uQWRkb24oaWQ9YWRkb25faWQpDQppY29uICAgICAgICAgPSB4Ym1jLnRyYW5zbGF0ZVBhdGgob3MucGF0aC5qb2luKCdzcGVjaWFsOi8vaG9tZS9hZGRvbnMvJyArIGFkZG9uX2lkLCAnaWNvbi5wbmcnKSkNCmZhbmFydCAgICAgICA9IHhibWMudHJhbnNsYXRlUGF0aChvcy5wYXRoLmpvaW4oJ3NwZWNpYWw6Ly9ob21lL2FkZG9ucy8nICsgYWRkb25faWQgLCAnZmFuYXJ0LmpwZycpKQ0KDQp1c2VybmFtZSAgICAgPSBjb250cm9sLnNldHRpbmcoJ1VzZXJuYW1lJykNCnBhc3N3b3JkICAgICA9IGNvbnRyb2wuc2V0dGluZygnUGFzc3dvcmQnKQ0KDQpob3N0ICAgICAgICAgPSAnaHR0cDovL2dhbW1haXB0di5kZG5zLm5ldCcNCnBvcnQgICAgICAgICA9ICc4MTI3Jw0KDQpsaXZlX3VybCAgICAgPSAnJXM6JXMvZW5pZ21hMi5waHA/dXNlcm5hbWU9JXMmcGFzc3dvcmQ9JXMmdHlwZT1nZXRfbGl2ZV9jYXRlZ29yaWVzJyUoaG9zdCxwb3J0LHVzZXJuYW1lLHBhc3N3b3JkKQ0Kdm9kX3VybCAgICAgID0gJyVzOiVzL2VuaWdtYTIucGhwP3VzZXJuYW1lPSVzJnBhc3N3b3JkPSVzJnR5cGU9Z2V0X3ZvZF9jYXRlZ29yaWVzJyUoaG9zdCxwb3J0LHVzZXJuYW1lLHBhc3N3b3JkKQ0KcGFuZWxfYXBpICAgID0gJyVzOiVzL3BhbmVsX2FwaS5waHA/dXNlcm5hbWU9JXMmcGFzc3dvcmQ9JXMnJShob3N0LHBvcnQsdXNlcm5hbWUscGFzc3dvcmQpDQpwbGF5X3VybCAgICAgPSAnJXM6JXMvbGl2ZS8lcy8lcy8nJShob3N0LHBvcnQsdXNlcm5hbWUscGFzc3dvcmQpDQoNCmFkdmFuY2VkX3NldHRpbmdzICAgICAgICAgICA9ICB4Ym1jLnRyYW5zbGF0ZVBhdGgoJ3NwZWNpYWw6Ly9ob21lL2FkZG9ucy8nK2FkZG9uX2lkKycvcmVzb3VyY2VzL2FkdmFuY2VkX3NldHRpbmdzJykNCmFkdmFuY2VkX3NldHRpbmdzX3RhcmdldCAgICA9ICB4Ym1jLnRyYW5zbGF0ZVBhdGgob3MucGF0aC5qb2luKCdzcGVjaWFsOi8vaG9tZS91c2VyZGF0YScsJ2FkdmFuY2Vkc2V0dGluZ3MueG1sJykpDQojIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIw0KDQpkZWYgc3RhcnQoKToNCglpZiB1c2VybmFtZT09IiI6DQoJCXVzZXIgPSB1c2VycG9wdXAoKQ0KCQlwYXNzdz0gcGFzc3BvcHVwKCkNCgkJY29udHJvbC5zZXRTZXR0aW5nKCdVc2VybmFtZScsdXNlcikNCgkJY29udHJvbC5zZXRTZXR0aW5nKCdQYXNzd29yZCcscGFzc3cpDQoJCXJlZnJlc2goKQ0KCQlhdXRoID0gJyVzOiVzL2VuaWdtYTIucGhwP3VzZXJuYW1lPSVzJnBhc3N3b3JkPSVzJnR5cGU9Z2V0X3ZvZF9jYXRlZ29yaWVzJyUoaG9zdCxwb3J0LHVzZXIscGFzc3cpDQoJCWF1dGggPSBPUEVOX1VSTChhdXRoKQ0KCQlpZiBhdXRoID09ICIiOg0KCQkJbGluZTEgPSAiSW5jb3JyZWN0IExvZ2luIERldGFpbHMiDQoJCQlsaW5lMiA9ICJQbGVhc2UgUmUtZW50ZXIiIA0KCQkJbGluZTMgPSAiIiANCgkJCXhibWNndWkuRGlhbG9nKCkub2soJ0F0dGVudGlvbicsIGxpbmUxLCBsaW5lMiwgbGluZTMpDQoJCQlzdGFydCgpDQoJCWVsc2U6DQoJCQlsaW5lMSA9ICJMb2dpbiBTdWNzZXNzZnVsbCINCgkJCWxpbmUyID0gIldlbGNvbWUgdG8gR2FtbWEgU3RyZWFtcyIgDQoJCQlsaW5lMyA9ICgnW0NPTE9SIHB1cnBsZV0lc1svQ09MT1JdJyV1c2VyKQ0KCQkJeGJtY2d1aS5EaWFsb2coKS5vaygnR2FtbWEgU3RyZWFtcycsIGxpbmUxLCBsaW5lMiwgbGluZTMpDQoJCQlwdnJzZXR1cCgpDQoJCQlhc2V0dGluZ3MoKQ0KCQkJcmVmcmVzaCgpDQoJCQlob21lKCkNCgllbHNlOg0KCQlhdXRoID0gJyVzOiVzL2VuaWdtYTIucGhwP3VzZXJuYW1lPSVzJnBhc3N3b3JkPSVzJnR5cGU9Z2V0X3ZvZF9jYXRlZ29yaWVzJyUoaG9zdCxwb3J0LHVzZXJuYW1lLHBhc3N3b3JkKQ0KCQlhdXRoID0gT1BFTl9VUkwoYXV0aCkNCgkJaWYgbm90IGF1dGg9PSIiOg0KCQkJYWRkRGlyKCdBY2NvdW50IEluZm9ybWF0aW9uJywndXJsJyw2LGljb24sZmFuYXJ0LCcnKQ0KCQkJYWRkRGlyKCdMaXZlIElQVFYnLCdsaXZlJywxLGljb24sZmFuYXJ0LCcnKQ0KCQkJaWYgeGJtYy5nZXRDb25kVmlzaWJpbGl0eSgnU3lzdGVtLkhhc0FkZG9uKHB2ci5pcHR2c2ltcGxlKScpOg0KCQkJCWFkZERpcignVFYgR3VpZGUnLCdwdnInLDcsaWNvbixmYW5hcnQsJycpDQoJCQlhZGREaXIoJ1ZPRCcsJ3ZvZCcsMyxpY29uLGZhbmFydCwnJykNCgkJCWFkZERpcignU2VhcmNoJywndXJsJyw1LGljb24sZmFuYXJ0LCcnKQ0KCQkJDQpkZWYgaG9tZSgpOg0KCWFkZERpcignQWNjb3VudCBJbmZvcm1hdGlvbicsJ3VybCcsNixpY29uLGZhbmFydCwnJykNCglhZGREaXIoJ0xpdmUgSVBUVicsJ2xpdmUnLDEsaWNvbixmYW5hcnQsJycpDQoJaWYgeGJtYy5nZXRDb25kVmlzaWJpbGl0eSgnU3lzdGVtLkhhc0FkZG9uKHB2ci5pcHR2c2ltcGxlKScpOg0KCQlhZGREaXIoJ1RWIEd1aWRlJywncHZyJyw3LGljb24sZmFuYXJ0LCcnKQ0KCWFkZERpcignVk9EJywndm9kJywzLGljb24sZmFuYXJ0LCcnKQ0KCWFkZERpcignU2VhcmNoJywnJyw1LGljb24sZmFuYXJ0LCcnKQ0KCQkNCmRlZiBsaXZlY2F0ZWdvcnkodXJsKToNCglvcGVuID0gT1BFTl9VUkwobGl2ZV91cmwpDQoJYWxsX2NhdHMgPSByZWdleF9nZXRfYWxsKG9wZW4sJzxjaGFubmVsPicsJzwvY2hhbm5lbD4nKQ0KCWZvciBhIGluIGFsbF9jYXRzOg0KCQluYW1lID0gcmVnZXhfZnJvbV90byhhLCc8dGl0bGU+JywnPC90aXRsZT4nKQ0KCQl1cmwxICA9IHJlZ2V4X2Zyb21fdG8oYSwnPHBsYXlsaXN0X3VybD4nLCc8L3BsYXlsaXN0X3VybD4nKS5yZXBsYWNlKCc8IVtDREFUQVsnLCcnKS5yZXBsYWNlKCddXT4nLCcnKQ0KCQlhZGREaXIoYmFzZTY0LmI2NGRlY29kZShuYW1lKSx1cmwxLDIsaWNvbixmYW5hcnQsJycpDQoJCQ0KZGVmIExpdmVsaXN0KHVybCk6DQoJb3BlbiA9IE9QRU5fVVJMKHVybCkNCglhbGxfY2F0cyA9IHJlZ2V4X2dldF9hbGwob3BlbiwnPGNoYW5uZWw+JywnPC9jaGFubmVsPicpDQoJZm9yIGEgaW4gYWxsX2NhdHM6DQoJCW5hbWUgPSByZWdleF9mcm9tX3RvKGEsJzx0aXRsZT4nLCc8L3RpdGxlPicpDQoJCW5hbWUgPSBiYXNlNjQuYjY0ZGVjb2RlKG5hbWUpDQoJCW5hbWUgPSByZS5zdWIoJ1xbLio/bWluICcsJy0nLG5hbWUpDQoJCXRodW1iPSByZWdleF9mcm9tX3RvKGEsJzxkZXNjX2ltYWdlPicsJzwvZGVzY19pbWFnZT4nKS5yZXBsYWNlKCc8IVtDREFUQVsnLCcnKS5yZXBsYWNlKCddXT4nLCcnKQ0KCQl1cmwxICA9IHJlZ2V4X2Zyb21fdG8oYSwnPHN0cmVhbV91cmw+JywnPC9zdHJlYW1fdXJsPicpLnJlcGxhY2UoJzwhW0NEQVRBWycsJycpLnJlcGxhY2UoJ11dPicsJycpDQoJCWRlc2MgPSByZWdleF9mcm9tX3RvKGEsJzxkZXNjcmlwdGlvbj4nLCc8L2Rlc2NyaXB0aW9uPicpDQoJCWFkZERpcihuYW1lLHVybDEsNCx0aHVtYixmYW5hcnQsYmFzZTY0LmI2NGRlY29kZShkZXNjKSkNCgkJDQoJDQpkZWYgdm9kKHVybCk6DQoJaWYgdXJsID09InZvZCI6DQoJCW9wZW4gPSBPUEVOX1VSTCh2b2RfdXJsKQ0KCWVsc2U6DQoJCW9wZW4gPSBPUEVOX1VSTCh1cmwpDQoJYWxsX2NhdHMgPSByZWdleF9nZXRfYWxsKG9wZW4sJzxjaGFubmVsPicsJzwvY2hhbm5lbD4nKQ0KCWZvciBhIGluIGFsbF9jYXRzOg0KCQlpZiAnPHBsYXlsaXN0X3VybD4nIGluIG9wZW46DQoJCQluYW1lID0gcmVnZXhfZnJvbV90byhhLCc8dGl0bGU+JywnPC90aXRsZT4nKQ0KCQkJdXJsMSAgPSByZWdleF9mcm9tX3RvKGEsJzxwbGF5bGlzdF91cmw+JywnPC9wbGF5bGlzdF91cmw+JykucmVwbGFjZSgnPCFbQ0RBVEFbJywnJykucmVwbGFjZSgnXV0+JywnJykNCgkJCWFkZERpcihzdHIoYmFzZTY0LmI2NGRlY29kZShuYW1lKSkucmVwbGFjZSgnPycsJycpLHVybDEsMyxpY29uLGZhbmFydCwnJykNCgkJZWxzZToNCgkJCW5hbWUgPSByZWdleF9mcm9tX3RvKGEsJzx0aXRsZT4nLCc8L3RpdGxlPicpDQoJCQl0aHVtYj0gcmVnZXhfZnJvbV90byhhLCc8ZGVzY19pbWFnZT4nLCc8L2Rlc2NfaW1hZ2U+JykucmVwbGFjZSgnPCFbQ0RBVEFbJywnJykucmVwbGFjZSgnXV0+JywnJykNCgkJCXVybCAgPSByZWdleF9mcm9tX3RvKGEsJzxzdHJlYW1fdXJsPicsJzwvc3RyZWFtX3VybD4nKS5yZXBsYWNlKCc8IVtDREFUQVsnLCcnKS5yZXBsYWNlKCddXT4nLCcnKQ0KCQkJZGVzYyA9IHJlZ2V4X2Zyb21fdG8oYSwnPGRlc2NyaXB0aW9uPicsJzwvZGVzY3JpcHRpb24+JykNCgkJCWFkZERpcihzdHIoYmFzZTY0LmI2NGRlY29kZShuYW1lKSkucmVwbGFjZSgnPycsJycpLHVybCw0LHRodW1iLGZhbmFydCxiYXNlNjQuYjY0ZGVjb2RlKGRlc2MpKQ0KCQkNCmRlZiBhY2NvdW50aW5mbygpOg0KCW9wZW4gPSBPUEVOX1VSTChwYW5lbF9hcGkpDQoJdXNlcm5hbWUgID0gcmVnZXhfZnJvbV90byhvcGVuLCcidXNlcm5hbWUiOiInLCciJykNCglwYXNzd29yZCAgPSByZWdleF9mcm9tX3RvKG9wZW4sJyJwYXNzd29yZCI6IicsJyInKQ0KCXN0YXR1cyAgICA9IHJlZ2V4X2Zyb21fdG8ob3BlbiwnInN0YXR1cyI6IicsJyInKQ0KCWNvbm5lY3RzICA9IHJlZ2V4X2Zyb21fdG8ob3BlbiwnIm1heF9jb25uZWN0aW9ucyI6IicsJyInKQ0KCWV4cGlyeSAgICA9IHJlZ2V4X2Zyb21fdG8ob3BlbiwnLCJleHBfZGF0ZSI6JywnLCcpLnJlcGxhY2UoIiciLCIiKS5yZXBsYWNlKCciJywnJykNCglleHBpcnkgICAgPSBkYXRldGltZS5kYXRldGltZS5mcm9tdGltZXN0YW1wKGludChleHBpcnkpKS5zdHJmdGltZSgnJWQvJW0vJVkgLSAlSDolTScpDQoJYWRkRGlyKCdbQ09MT1IgcHVycGxlXUFjY291bnQgU3RhdHVzIDpbL0NPTE9SXSAlcyclc3RhdHVzLCcnLCcnLGljb24sZmFuYXJ0LCcnKQ0KCWFkZERpcignW0NPTE9SIHB1cnBsZV1FeHBpcnkgRGF0ZTpbL0NPTE9SXSAnK2V4cGlyeSwnJywnJyxpY29uLGZhbmFydCwnJykNCglhZGREaXIoJ1tDT0xPUiBwdXJwbGVdVXNlcm5hbWUgOlsvQ09MT1JdICcrdXNlcm5hbWUsJycsJycsaWNvbixmYW5hcnQsJycpDQoJYWRkRGlyKCdbQ09MT1IgcHVycGxlXVBhc3N3b3JkIDpbL0NPTE9SXSAnK3Bhc3N3b3JkLCcnLCcnLGljb24sZmFuYXJ0LCcnKQ0KCWFkZERpcignW0NPTE9SIHB1cnBsZV1BbGxvd2VkIENvbm5lY3Rpb25zOlsvQ09MT1JdICcrY29ubmVjdHMsJycsJycsaWNvbixmYW5hcnQsJycpDQoJDQpkZWYgc2VhcmNoZGlhbG9nKCk6DQoJc2VhcmNoID0gY29udHJvbC5pbnB1dERpYWxvZyhoZWFkaW5nPSdTZWFyY2ggZm9yIGEgVFYgY2hhbm5lbDonKQ0KCWlmIHNlYXJjaD09IiI6DQoJCXJldHVybg0KCWVsc2U6DQoJCXJldHVybiBzZWFyY2gNCgkNCmRlZiBzZWFyY2goKToNCgl0ZXh0ID0gc2VhcmNoZGlhbG9nKCkNCglvcGVuID0gT1BFTl9VUkwocGFuZWxfYXBpKQ0KCWFsbF9jaGFucyA9IHJlZ2V4X2dldF9hbGwob3BlbiwneyJudW0iOicsJ2VwZycpDQoJZm9yIGEgaW4gYWxsX2NoYW5zOg0KCQluYW1lID0gcmVnZXhfZnJvbV90byhhLCduYW1lIjoiJywnIicpLnJlcGxhY2UoJ1wvJywnLycpDQoJCXVybCAgPSByZWdleF9mcm9tX3RvKGEsJyJzdHJlYW1faWQiOiInLCciJykNCgkJdGh1bWI9IHJlZ2V4X2Zyb21fdG8oYSwnc3RyZWFtX2ljb24iOiInLCciJykucmVwbGFjZSgnXC8nLCcvJykNCgkJaWYgdGV4dCBpbiBuYW1lLmxvd2VyKCk6DQoJCQlhZGREaXIobmFtZSxwbGF5X3VybCt1cmwrJy50cycsNCx0aHVtYixmYW5hcnQsJycpDQoJCWVsaWYgdGV4dCBub3QgaW4gbmFtZS5sb3dlcigpIGFuZCB0ZXh0IGluIG5hbWU6DQoJCQlhZGREaXIobmFtZSxwbGF5X3VybCt1cmwrJy50cycsNCx0aHVtYixmYW5hcnQsJycpDQoJCQkNCgkNCmRlZiB1c2VycG9wdXAoKToNCglrYiA9eGJtYy5LZXlib2FyZCAoJycsICdoZWFkaW5nJywgVHJ1ZSkNCglrYi5zZXRIZWFkaW5nKCdFbnRlciBVc2VybmFtZScpDQoJa2Iuc2V0SGlkZGVuSW5wdXQoRmFsc2UpDQoJa2IuZG9Nb2RhbCgpDQoJaWYgKGtiLmlzQ29uZmlybWVkKCkpOg0KCQl0ZXh0ID0ga2IuZ2V0VGV4dCgpDQoJCXJldHVybiB0ZXh0DQoJZWxzZToNCgkJcmV0dXJuIEZhbHNlDQoJCQ0KZGVmIHBhc3Nwb3B1cCgpOg0KCWtiID14Ym1jLktleWJvYXJkICgnJywgJ2hlYWRpbmcnLCBUcnVlKQ0KCWtiLnNldEhlYWRpbmcoJ0VudGVyIFBhc3N3b3JkJykNCglrYi5zZXRIaWRkZW5JbnB1dChUcnVlKQ0KCWtiLmRvTW9kYWwoKQ0KCWlmIChrYi5pc0NvbmZpcm1lZCgpKToNCgkJdGV4dCA9IGtiLmdldFRleHQoKQ0KCQlyZXR1cm4gdGV4dA0KCWVsc2U6DQoJCXJldHVybiBGYWxzZQ0KCQkNCgkJDQpkZWYgc3RyZWFtX3ZpZGVvKHVybCk6DQoJbGl6ID0geGJtY2d1aS5MaXN0SXRlbSgnJywgaWNvbkltYWdlPSdEZWZhdWx0VmlkZW8ucG5nJywgdGh1bWJuYWlsSW1hZ2U9aWNvbikNCglsaXouc2V0SW5mbyh0eXBlPSdWaWRlbycsIGluZm9MYWJlbHM9eydUaXRsZSc6ICcnLCAnUGxvdCc6ICcnfSkNCglsaXouc2V0UHJvcGVydHkoJ0lzUGxheWFibGUnLCd0cnVlJykNCglsaXouc2V0UGF0aChzdHIodXJsKSkNCgl4Ym1jcGx1Z2luLnNldFJlc29sdmVkVXJsKGludChzeXMuYXJndlsxXSksIFRydWUsIGxpeikNCgkNCmRlZiByZWZyZXNoKCk6DQoJeGJtYy5leGVjdXRlYnVpbHRpbignQ29udGFpbmVyLlJlZnJlc2gnKQ0KCQ0KZGVmIGFzZXR0aW5ncygpOg0KCWRpYWxvZyA9IHhibWNndWkuRGlhbG9nKCkNCgljaG9pY2UgPSBkaWFsb2cueWVzbm8oJ0dhbW1hIFN0cmVhbXMnLCAnUGxlYXNlIFNlbGVjdCBUaGUgUkFNIFNpemUgb2YgWW91ciBEZXZpY2UnLCB5ZXNsYWJlbD0nTGVzcyB0aGFuIDFHQiBSQU0nLCBub2xhYmVsPSdNb3JlIHRoYW4gMUdCIFJBTScpDQoJaWYgY2hvaWNlOg0KCQlsZXNzdGhhbigpDQoJZWxzZToNCgkJbW9yZXRoYW4oKQ0KDQoJCQkNCmRlZiB0dmd1aWRlKCk6DQoJeGJtYy5leGVjdXRlYnVpbHRpbignQWN0aXZhdGVXaW5kb3coVFZHdWlkZSknKQ0KCQ0KZGVmIHB2cnNldHVwKCk6DQoJZGlhbG9nID0geGJtY2d1aS5EaWFsb2coKQ0KCWNob2ljZSA9IGRpYWxvZy55ZXNubygnR2FtbWEgU3RyZWFtcycsICdXb3VsZCB5b3UgbGlrZSB1cyB0byBTZXR1cCB0aGUgVFYgR3VpZGUgZm9yIFlvdT8nLCB5ZXNsYWJlbD0nWWVzJywgbm9sYWJlbD0nTm8nKQ0KCWlmIGNob2ljZToNCgkJY29ycmVjdFBWUigpDQoJZWxzZToNCgkJcmV0dXJuDQoJDQoJCQkNCmRlZiBjb3JyZWN0UFZSKCk6DQoNCglhZGRvbiA9IHhibWNhZGRvbi5BZGRvbigncGx1Z2luLnZpZGVvLkdhbW1hU3RyZWFtcycpDQoJdXNlcm5hbWVfdGV4dCA9IGFkZG9uLmdldFNldHRpbmcoaWQ9J1VzZXJuYW1lJykNCglwYXNzd29yZF90ZXh0ID0gYWRkb24uZ2V0U2V0dGluZyhpZD0nUGFzc3dvcmQnKQ0KCWpzb25TZXRQVlIgPSAneyJqc29ucnBjIjoiMi4wIiwgIm1ldGhvZCI6IlNldHRpbmdzLlNldFNldHRpbmdWYWx1ZSIsICJwYXJhbXMiOnsic2V0dGluZyI6InB2cm1hbmFnZXIuZW5hYmxlZCIsICJ2YWx1ZSI6dHJ1ZX0sImlkIjoxfScNCglJUFRWb24gCSAgID0gJ3sianNvbnJwYyI6IjIuMCIsIm1ldGhvZCI6IkFkZG9ucy5TZXRBZGRvbkVuYWJsZWQiLCJwYXJhbXMiOnsiYWRkb25pZCI6InB2ci5pcHR2c2ltcGxlIiwiZW5hYmxlZCI6dHJ1ZX0sImlkIjoxfScNCgludWxsZGVtbyAgID0gJ3sianNvbnJwYyI6IjIuMCIsIm1ldGhvZCI6IkFkZG9ucy5TZXRBZGRvbkVuYWJsZWQiLCJwYXJhbXMiOnsiYWRkb25pZCI6InB2ci5kZW1vIiwiZW5hYmxlZCI6ZmFsc2V9LCJpZCI6MX0nDQoJbG9naW51cmwgICA9ICJodHRwOi8vZ2FtbWFpcHR2LmRkbnMubmV0OjgxMjcvZ2V0LnBocD91c2VybmFtZT0iICsgdXNlcm5hbWVfdGV4dCArICImcGFzc3dvcmQ9IiArIHBhc3N3b3JkX3RleHQgKyAiJnR5cGU9bTN1X3BsdXMmb3V0cHV0PXRzIg0KCUVQR3VybCAgICAgPSAiaHR0cDovL2dhbW1haXB0di5kZG5zLm5ldDo4MTI3L3htbHR2LnBocD91c2VybmFtZT0iICsgdXNlcm5hbWVfdGV4dCArICImcGFzc3dvcmQ9IiArIHBhc3N3b3JkX3RleHQgKyAiJnR5cGU9bTN1X3BsdXMmb3V0cHV0PXRzIg0KDQoJeGJtYy5leGVjdXRlSlNPTlJQQyhqc29uU2V0UFZSKQ0KCXhibWMuZXhlY3V0ZUpTT05SUEMoSVBUVm9uKQ0KCXhibWMuZXhlY3V0ZUpTT05SUEMobnVsbGRlbW8pDQoJDQoJbW9pc3QgPSB4Ym1jYWRkb24uQWRkb24oJ3B2ci5pcHR2c2ltcGxlJykNCgltb2lzdC5zZXRTZXR0aW5nKGlkPSdtM3VVcmwnLCB2YWx1ZT1sb2dpbnVybCkNCgltb2lzdC5zZXRTZXR0aW5nKGlkPSdlcGdVcmwnLCB2YWx1ZT1FUEd1cmwpDQoJbW9pc3Quc2V0U2V0dGluZyhpZD0nbTN1Q2FjaGUnLCB2YWx1ZT0iZmFsc2UiKQ0KCW1vaXN0LnNldFNldHRpbmcoaWQ9J2VwZ0NhY2hlJywgdmFsdWU9ImZhbHNlIikNCgl4Ym1jLmV4ZWN1dGVidWlsdGluKCJDb250YWluZXIuUmVmcmVzaCIpDQoJDQoNCmNsYXNzIFRyYWlsZXI6DQogICAgZGVmIF9faW5pdF9fKHNlbGYpOg0KICAgICAgICBzZWxmLmJhc2VfbGluayA9ICdodHRwOi8vd3d3LnlvdXR1YmUuY29tJw0KICAgICAgICBzZWxmLmtleV9saW5rID0gJ1FVbDZZVk41UW5aRVMzSm5TVTFOVm1SUGFqWlNiMXBuVVdoYVN6UkhNM015YkRaWGVWaG4nDQogICAgICAgIHNlbGYua2V5X2xpbmsgPSAnJmtleT0lcycgJSBiYXNlNjQudXJsc2FmZV9iNjRkZWNvZGUoc2VsZi5rZXlfbGluaykNCiAgICAgICAgc2VsZi5zZWFyY2hfbGluayA9ICdodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS95b3V0dWJlL3YzL3NlYXJjaD9wYXJ0PXNuaXBwZXQmdHlwZT12aWRlbyZtYXhSZXN1bHRzPTUmcT0lcycNCiAgICAgICAgc2VsZi55b3V0dWJlX3NlYXJjaCA9ICdodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS95b3V0dWJlL3YzL3NlYXJjaD9xPScNCiAgICAgICAgc2VsZi55b3V0dWJlX3dhdGNoID0gJ2h0dHA6Ly93d3cueW91dHViZS5jb20vd2F0Y2g/dj0lcycNCg0KICAgIGRlZiBwbGF5KHNlbGYsIG5hbWUsIHVybD1Ob25lKToNCiAgICAgICAgdHJ5Og0KICAgICAgICAgICAgdXJsID0gc2VsZi53b3JrZXIobmFtZSwgdXJsKQ0KICAgICAgICAgICAgaWYgdXJsID09IE5vbmU6IHJldHVybg0KDQogICAgICAgICAgICB0aXRsZSA9IGNvbnRyb2wuaW5mb0xhYmVsKCdsaXN0aXRlbS50aXRsZScpDQogICAgICAgICAgICBpZiB0aXRsZSA9PSAnJzogdGl0bGUgPSBjb250cm9sLmluZm9MYWJlbCgnbGlzdGl0ZW0ubGFiZWwnKQ0KICAgICAgICAgICAgaWNvbiA9IGNvbnRyb2wuaW5mb0xhYmVsKCdsaXN0aXRlbS5pY29uJykNCg0KICAgICAgICAgICAgaXRlbSA9IGNvbnRyb2wuaXRlbShwYXRoPXVybCwgaWNvbkltYWdlPWljb24sIHRodW1ibmFpbEltYWdlPWljb24pDQogICAgICAgICAgICB0cnk6IGl0ZW0uc2V0QXJ0KHsnaWNvbic6IGljb259KQ0KICAgICAgICAgICAgZXhjZXB0OiBwYXNzDQogICAgICAgICAgICBpdGVtLnNldEluZm8odHlwZT0nVmlkZW8nLCBpbmZvTGFiZWxzID0geyd0aXRsZSc6IHRpdGxlfSkNCiAgICAgICAgICAgIGNvbnRyb2wucGxheWVyLnBsYXkodXJsLCBpdGVtKQ0KICAgICAgICBleGNlcHQ6DQogICAgICAgICAgICBwYXNzDQoNCiAgICBkZWYgd29ya2VyKHNlbGYsIG5hbWUsIHVybCk6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIGlmIHVybC5zdGFydHN3aXRoKHNlbGYuYmFzZV9saW5rKToNCiAgICAgICAgICAgICAgICB1cmwgPSBzZWxmLnJlc29sdmUodXJsKQ0KICAgICAgICAgICAgICAgIGlmIHVybCA9PSBOb25lOiByYWlzZSBFeGNlcHRpb24oKQ0KICAgICAgICAgICAgICAgIHJldHVybiB1cmwNCiAgICAgICAgICAgIGVsaWYgbm90IHVybC5zdGFydHN3aXRoKCdodHRwOi8vJyk6DQogICAgICAgICAgICAgICAgdXJsID0gc2VsZi55b3V0dWJlX3dhdGNoICUgdXJsDQogICAgICAgICAgICAgICAgdXJsID0gc2VsZi5yZXNvbHZlKHVybCkNCiAgICAgICAgICAgICAgICBpZiB1cmwgPT0gTm9uZTogcmFpc2UgRXhjZXB0aW9uKCkNCiAgICAgICAgICAgICAgICByZXR1cm4gdXJsDQogICAgICAgICAgICBlbHNlOg0KICAgICAgICAgICAgICAgIHJhaXNlIEV4Y2VwdGlvbigpDQogICAgICAgIGV4Y2VwdDoNCiAgICAgICAgICAgIHF1ZXJ5ID0gbmFtZSArICcgdHJhaWxlcicNCiAgICAgICAgICAgIHF1ZXJ5ID0gc2VsZi55b3V0dWJlX3NlYXJjaCArIHF1ZXJ5DQogICAgICAgICAgICB1cmwgPSBzZWxmLnNlYXJjaChxdWVyeSkNCiAgICAgICAgICAgIGlmIHVybCA9PSBOb25lOiByZXR1cm4NCiAgICAgICAgICAgIHJldHVybiB1cmwNCg0KDQogICAgZGVmIHNlYXJjaChzZWxmLCB1cmwpOg0KICAgICAgICB0cnk6DQogICAgICAgICAgICBxdWVyeSA9IHVybHBhcnNlLnBhcnNlX3FzKHVybHBhcnNlLnVybHBhcnNlKHVybCkucXVlcnkpWydxJ11bMF0NCg0KICAgICAgICAgICAgdXJsID0gc2VsZi5zZWFyY2hfbGluayAlIHVybGxpYi5xdW90ZV9wbHVzKHF1ZXJ5KSArIHNlbGYua2V5X2xpbmsNCg0KICAgICAgICAgICAgcmVzdWx0ID0gY2xpZW50LnJlcXVlc3QodXJsKQ0KDQogICAgICAgICAgICBpdGVtcyA9IGpzb24ubG9hZHMocmVzdWx0KVsnaXRlbXMnXQ0KICAgICAgICAgICAgaXRlbXMgPSBbKGlbJ2lkJ11bJ3ZpZGVvSWQnXSkgZm9yIGkgaW4gaXRlbXNdDQoNCiAgICAgICAgICAgIGZvciB1cmwgaW4gaXRlbXM6DQogICAgICAgICAgICAgICAgdXJsID0gc2VsZi5yZXNvbHZlKHVybCkNCiAgICAgICAgICAgICAgICBpZiBub3QgdXJsIGlzIE5vbmU6IHJldHVybiB1cmwNCiAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgcmV0dXJuDQoNCg0KICAgIGRlZiByZXNvbHZlKHNlbGYsIHVybCk6DQogICAgICAgIHRyeToNCiAgICAgICAgICAgIGlkID0gdXJsLnNwbGl0KCc/dj0nKVstMV0uc3BsaXQoJy8nKVstMV0uc3BsaXQoJz8nKVswXS5zcGxpdCgnJicpWzBdDQogICAgICAgICAgICByZXN1bHQgPSBjbGllbnQucmVxdWVzdCgnaHR0cDovL3d3dy55b3V0dWJlLmNvbS93YXRjaD92PSVzJyAlIGlkKQ0KDQogICAgICAgICAgICBtZXNzYWdlID0gY2xpZW50LnBhcnNlRE9NKHJlc3VsdCwgJ2RpdicsIGF0dHJzID0geydpZCc6ICd1bmF2YWlsYWJsZS1zdWJtZXNzYWdlJ30pDQogICAgICAgICAgICBtZXNzYWdlID0gJycuam9pbihtZXNzYWdlKQ0KDQogICAgICAgICAgICBhbGVydCA9IGNsaWVudC5wYXJzZURPTShyZXN1bHQsICdkaXYnLCBhdHRycyA9IHsnaWQnOiAnd2F0Y2g3LW5vdGlmaWNhdGlvbi1hcmVhJ30pDQoNCiAgICAgICAgICAgIGlmIGxlbihhbGVydCkgPiAwOiByYWlzZSBFeGNlcHRpb24oKQ0KICAgICAgICAgICAgaWYgcmUuc2VhcmNoKCdbYS16QS1aXScsIG1lc3NhZ2UpOiByYWlzZSBFeGNlcHRpb24oKQ0KDQogICAgICAgICAgICB1cmwgPSAncGx1Z2luOi8vcGx1Z2luLnZpZGVvLnlvdXR1YmUvcGxheS8/dmlkZW9faWQ9JXMnICUgaWQNCiAgICAgICAgICAgIHJldHVybiB1cmwNCiAgICAgICAgZXhjZXB0Og0KICAgICAgICAgICAgcmV0dXJuDQoJCQkNCmRlZiB0cmFpbGVyKHVybCk6DQoJeGJtYy5leGVjdXRlYnVpbHRpbignQWN0aXZhdGVXaW5kb3coYnVzeWRpYWxvZyknKQ0KCVRyYWlsZXIoKS5wbGF5KHVybCkgDQoJeGJtYy5leGVjdXRlYnVpbHRpbignRGlhbG9nLkNsb3NlKGJ1c3lkaWFsb2cpJykNCg0KZGVmIHJlZ2V4X2Zyb21fdG8odGV4dCwgZnJvbV9zdHJpbmcsIHRvX3N0cmluZywgZXhjbHVkaW5nPVRydWUpOg0KCWlmIGV4Y2x1ZGluZzoNCgkJdHJ5OiByID0gcmUuc2VhcmNoKCIoP2kpIiArIGZyb21fc3RyaW5nICsgIihbXFNcc10rPykiICsgdG9fc3RyaW5nLCB0ZXh0KS5ncm91cCgxKQ0KCQlleGNlcHQ6IHIgPSAnJw0KCWVsc2U6DQoJCXRyeTogciA9IHJlLnNlYXJjaCgiKD9pKSgiICsgZnJvbV9zdHJpbmcgKyAiW1xTXHNdKz8iICsgdG9fc3RyaW5nICsgIikiLCB0ZXh0KS5ncm91cCgxKQ0KCQlleGNlcHQ6IHIgPSAnJw0KCXJldHVybiByDQoNCg0KZGVmIHJlZ2V4X2dldF9hbGwodGV4dCwgc3RhcnRfd2l0aCwgZW5kX3dpdGgpOg0KCXIgPSByZS5maW5kYWxsKCIoP2kpKCIgKyBzdGFydF93aXRoICsgIltcU1xzXSs/IiArIGVuZF93aXRoICsgIikiLCB0ZXh0KQ0KCXJldHVybiByDQoNCg0KZGVmIGdldF9wYXJhbXMoKToNCglwYXJhbT1bXQ0KCXBhcmFtc3RyaW5nPXN5cy5hcmd2WzJdDQoJaWYgbGVuKHBhcmFtc3RyaW5nKT49MjoNCgkJcGFyYW1zPXN5cy5hcmd2WzJdDQoJCWNsZWFuZWRwYXJhbXM9cGFyYW1zLnJlcGxhY2UoJz8nLCcnKQ0KCQlpZiAocGFyYW1zW2xlbihwYXJhbXMpLTFdPT0nLycpOg0KCQkJcGFyYW1zPXBhcmFtc1swOmxlbihwYXJhbXMpLTJdDQoJCXBhaXJzb2ZwYXJhbXM9Y2xlYW5lZHBhcmFtcy5zcGxpdCgnJicpDQoJCXBhcmFtPXt9DQoJCWZvciBpIGluIHJhbmdlKGxlbihwYWlyc29mcGFyYW1zKSk6DQoJCQlzcGxpdHBhcmFtcz17fQ0KCQkJc3BsaXRwYXJhbXM9cGFpcnNvZnBhcmFtc1tpXS5zcGxpdCgnPScpDQoJCQlpZiAobGVuKHNwbGl0cGFyYW1zKSk9PTI6DQoJCQkJcGFyYW1bc3BsaXRwYXJhbXNbMF1dPXNwbGl0cGFyYW1zWzFdDQoJcmV0dXJuIHBhcmFtDQoNCg0KZGVmIGFkZERpcihuYW1lLHVybCxtb2RlLGljb25pbWFnZSxmYW5hcnQsZGVzY3JpcHRpb24pOg0KCXU9c3lzLmFyZ3ZbMF0rIj91cmw9Iit1cmxsaWIucXVvdGVfcGx1cyh1cmwpKyImbW9kZT0iK3N0cihtb2RlKSsiJm5hbWU9Iit1cmxsaWIucXVvdGVfcGx1cyhuYW1lKSsiJmljb25pbWFnZT0iK3VybGxpYi5xdW90ZV9wbHVzKGljb25pbWFnZSkrIiZkZXNjcmlwdGlvbj0iK3VybGxpYi5xdW90ZV9wbHVzKGRlc2NyaXB0aW9uKQ0KCW9rPVRydWUNCglsaXo9eGJtY2d1aS5MaXN0SXRlbShuYW1lLCBpY29uSW1hZ2U9IkRlZmF1bHRGb2xkZXIucG5nIiwgdGh1bWJuYWlsSW1hZ2U9aWNvbmltYWdlKQ0KCWxpei5zZXRJbmZvKCB0eXBlPSJWaWRlbyIsIGluZm9MYWJlbHM9eyJUaXRsZSI6IG5hbWUsIlBsb3QiOmRlc2NyaXB0aW9ufSkNCglsaXouc2V0UHJvcGVydHkoJ2ZhbmFydF9pbWFnZScsIGZhbmFydCkNCgljbSA9IFtdDQoJY20uYXBwZW5kKCgnUnVuIFNwZWVkIFRlc3QnLCdSdW5zY3JpcHQoInNwZWNpYWw6Ly9ob21lL2FkZG9ucy9wbHVnaW4udmlkZW8uR2FtbWFTdHJlYW1zL3Jlc291cmNlcy9tb2R1bGVzL3NwZWVkdGVzdC5weSIpJykpDQoJbGl6LmFkZENvbnRleHRNZW51SXRlbXMoY20pDQoJaWYgbW9kZT09NDoNCgkJbGl6LnNldFByb3BlcnR5KCJJc1BsYXlhYmxlIiwidHJ1ZSIpDQoJCWNtID0gW10NCgkJY20uYXBwZW5kKCgnUGxheSBUcmFpbGVyJywnWEJNQy5SdW5QbHVnaW4ocGx1Z2luOi8vcGx1Z2luLnZpZGVvLkdhbW1hU3RyZWFtcy8/bW9kZT04JnVybD0nK3N0cihuYW1lKSsnKScpKQ0KCQlsaXouYWRkQ29udGV4dE1lbnVJdGVtcyhjbSkNCgkJb2s9eGJtY3BsdWdpbi5hZGREaXJlY3RvcnlJdGVtKGhhbmRsZT1pbnQoc3lzLmFyZ3ZbMV0pLHVybD11LGxpc3RpdGVtPWxpeixpc0ZvbGRlcj1GYWxzZSkNCgllbGlmIG1vZGU9PTc6DQoJCW9rPXhibWNwbHVnaW4uYWRkRGlyZWN0b3J5SXRlbShoYW5kbGU9aW50KHN5cy5hcmd2WzFdKSx1cmw9dSxsaXN0aXRlbT1saXosaXNGb2xkZXI9RmFsc2UpDQoJZWxzZToNCgkJb2s9eGJtY3BsdWdpbi5hZGREaXJlY3RvcnlJdGVtKGhhbmRsZT1pbnQoc3lzLmFyZ3ZbMV0pLHVybD11LGxpc3RpdGVtPWxpeixpc0ZvbGRlcj1UcnVlKQ0KCXJldHVybiBvaw0KCXhibWNwbHVnaW4uZW5kT2ZEaXJlY3RvcnkNCg0KZGVmIE9QRU5fVVJMKHVybCk6DQoJaGVhZGVycyA9IHt9DQoJaGVhZGVyc1snVXNlci1BZ2VudCddID0gJ01vemlsbGEvNS4wIChXaW5kb3dzIE5UIDYuMTsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzUyLjAuMjc0My4xMTYgU2FmYXJpLzUzNy4zNicNCglsaW5rID0gcmVxdWVzdHMuc2Vzc2lvbigpLmdldCh1cmwsIGhlYWRlcnM9aGVhZGVycywgdmVyaWZ5PUZhbHNlKS50ZXh0DQoJbGluayA9IGxpbmsuZW5jb2RlKCdhc2NpaScsICdpZ25vcmUnKQ0KCXJldHVybiBsaW5rDQoNCmRlZiBtb3JldGhhbigpOg0KCQlmaWxlID0gb3Blbihvcy5wYXRoLmpvaW4oYWR2YW5jZWRfc2V0dGluZ3MsICdtb3JldGhhbi54bWwnKSkNCgkJYSA9IGZpbGUucmVhZCgpDQoJCWYgPSBvcGVuKGFkdmFuY2VkX3NldHRpbmdzX3RhcmdldCwgbW9kZT0ndysnKQ0KCQlmLndyaXRlKGEpDQoJCWYuY2xvc2UoKQ0KCQkNCmRlZiBsZXNzdGhhbigpOg0KCQlmaWxlID0gb3Blbihvcy5wYXRoLmpvaW4oYWR2YW5jZWRfc2V0dGluZ3MsICdsZXNzdGhhbi54bWwnKSkNCgkJYSA9IGZpbGUucmVhZCgpDQoJCWYgPSBvcGVuKGFkdmFuY2VkX3NldHRpbmdzX3RhcmdldCwgbW9kZT0ndysnKQ0KCQlmLndyaXRlKGEpDQoJCWYuY2xvc2UoKQ0KDQpwYXJhbXM9Z2V0X3BhcmFtcygpDQp1cmw9Tm9uZQ0KbmFtZT1Ob25lDQptb2RlPU5vbmUNCmljb25pbWFnZT1Ob25lDQpkZXNjcmlwdGlvbj1Ob25lDQpxdWVyeT1Ob25lDQp0eXBlPU5vbmUNCg0KdHJ5Og0KCXVybD11cmxsaWIudW5xdW90ZV9wbHVzKHBhcmFtc1sidXJsIl0pDQpleGNlcHQ6DQoJcGFzcw0KdHJ5Og0KCW5hbWU9dXJsbGliLnVucXVvdGVfcGx1cyhwYXJhbXNbIm5hbWUiXSkNCmV4Y2VwdDoNCglwYXNzDQp0cnk6DQoJaWNvbmltYWdlPXVybGxpYi51bnF1b3RlX3BsdXMocGFyYW1zWyJpY29uaW1hZ2UiXSkNCmV4Y2VwdDoNCglwYXNzDQp0cnk6DQoJbW9kZT1pbnQocGFyYW1zWyJtb2RlIl0pDQpleGNlcHQ6DQoJcGFzcw0KdHJ5Og0KCWRlc2NyaXB0aW9uPXVybGxpYi51bnF1b3RlX3BsdXMocGFyYW1zWyJkZXNjcmlwdGlvbiJdKQ0KZXhjZXB0Og0KCXBhc3MNCnRyeToNCglxdWVyeT11cmxsaWIudW5xdW90ZV9wbHVzKHBhcmFtc1sicXVlcnkiXSkNCmV4Y2VwdDoNCglwYXNzDQp0cnk6DQoJdHlwZT11cmxsaWIudW5xdW90ZV9wbHVzKHBhcmFtc1sidHlwZSJdKQ0KZXhjZXB0Og0KCXBhc3MNCg0KaWYgbW9kZT09Tm9uZSBvciB1cmw9PU5vbmUgb3IgbGVuKHVybCk8MToNCglzdGFydCgpDQoNCmVsaWYgbW9kZT09MToNCglsaXZlY2F0ZWdvcnkodXJsKQ0KCQ0KZWxpZiBtb2RlPT0yOg0KCUxpdmVsaXN0KHVybCkNCgkNCmVsaWYgbW9kZT09MzoNCgl2b2QodXJsKQ0KCQ0KZWxpZiBtb2RlPT00Og0KCXN0cmVhbV92aWRlbyh1cmwpDQoJDQplbGlmIG1vZGU9PTU6DQoJc2VhcmNoKCkNCgkNCmVsaWYgbW9kZT09NjoNCglhY2NvdW50aW5mbygpDQoJDQplbGlmIG1vZGU9PTc6DQoJdHZndWlkZSgpDQoJDQplbGlmIG1vZGU9PTg6DQoJdHJhaWxlcih1cmwpDQoNCg0KeGJtY3BsdWdpbi5lbmRPZkRpcmVjdG9yeShpbnQoc3lzLmFyZ3ZbMV0pKQ=='))